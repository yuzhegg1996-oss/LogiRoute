# 基于机器学习的高校网络舆情监测 预警系统设计与实现

学 院:信息科学与工程学院

专业班级:软件工程 1903 班

姓 名:施昌明

学 号:20191107100

指导教师 董红斌 教授 高巍 助教

2023 年 5 月

# 基于机器学习的高校网络舆情监测

预警系统设计与实现

**Design and Implementation of A Machine Learning Based Online Public Opinion Monitoring and Warning System for Universities**

# 摘 要

<span id="page-2-0"></span>随着科技的发展,人们的生活质量的提高,互联网业逐渐普及,网民的数量 日益庞大,其中大学生占比比较大,他们的言行举止也及为重要,并且发表的信 息没有门槛,且传播便捷,网络舆论对中国的思想形态和社会面貌影响颇大。在 网络上,高校管理人员需要权衡社会舆论,这大大增加了工作量。网络舆情监测 与预警系统可以解决这一问题并有效的避免负面网络信息肆意传播。

本文使用django框架实现用户登录,用ChatGPT生成用于训练的评论数据, 结合在腾讯下载的预训练模型,再嵌入到模型内。基于机器学习设计,结合pytorch 框架搭建三层模型,嵌入 embedding 层,RNN 层,线性层,再结合 sigmoid 函数 计算。之后基于先前生成的数据和表白墙爬取的数据使用 jieba 分词创建一个词 典。用户从表白墙爬取数据,如果评论中有词典里的词上交给用户,再让用户来 进行判断是否违规。再将违规的写入数据,再重新训练模型。

本系统通过对高校表白墙的监控,最终实现基于机器学习的高校舆情监测预 警系统的整体设计并达到预期要求。

关键词: 机器学习 RNN pytorch 框架 django 框架 舆情监测

# **Abstract**

<span id="page-3-0"></span>With the development of science and technology, the improvement of people's quality of life, the Internet industry is gradually popularized, the number of netizens is increasingly large, of which college students account for a relatively large proportion, their words and deeds are also important, and the published information has no threshold, and the spread is convenient, Internet public opinion has a great impact on China's ideological form and social outlook. On the web, university administrators need to weigh public opinion, which greatly increases the workload. The network public opinion monitoring and early warning system can solve this problem and effectively avoid the wanton dissemination of negative network information.

 In this paper, the django framework is used to implement user login, and ChatGPT is used to generate comment data for training, combined with the pre-trained model downloaded by Tencent, and then embedded in the model. Based on machine learning design, combined with the pytorch framework to build a three-layer model, embedding layer, RNN layer, linear layer, and combined with sigmoid function calculation. A dictionary is then created using jieba participles based on the previously generated data and the data crawled by the confession wall. The user crawls the data from the confession wall, and if there are words in the dictionary in the comment, it is handed to the user, and then the user is asked to determine whether it is a violation. Then write the data for the violation and retrain the model.

Through the monitoring of the university confession wall, this system finally realizes the overall design of the university public opinion monitoring and early warning system based on machine learning and meets the expected requirements.

**Key words:** machine learning RNN pytorch framework django framework public sentiment monitoring

# 目 录

| 摘 要I                |
|---------------------|
| Abstract            |
| 1 绪 论               |
| 1.1 课题研究的背景与意义1     |
| 1.2 国内外研究现状及发展趋势2   |
| 1.3 研究内容3           |
| 2 相关技术理论基础4         |
| 2.1 RNN (循环神经网络)4   |
| 2.1.1 神经网络          |
| 2.1.2 RNN 的结构和原理4   |
| 2.2 ChatGPT5        |
| 2.3 网络爬虫5           |
| 2.4 jieba 分词器6      |
| 2.5 db. sqlite 数据库6 |
| 2.6 Django 框架6      |
| 2.7 Word2Vec        |
| 2.8 腾讯预训练嵌入模型7      |
| 3 系统分析与设计8          |
| 3.1 设计思想8           |
| 3.2 功能模块需求分析8       |
| 3.3 系统功能8           |
| 3.4 数据库设计9          |
| 4 系统实现10            |
| 4.1 数据的获取10         |
| 4.2 数据的处理11         |
| 4.3 模型的构建12         |
| 4.4 模型的训练           |
| 4.5 模型的使用14         |
| 4.6 用户登录功能15        |
| 4.7 舆情信息收集功能17      |
| 4.8 舆情信息分析功能17      |
| 4.9 舆情信息预警功能        |
| 5 系统测试19            |
| 6 研究成果与社会的关系22      |
| 结论                  |
| 致 谢                 |
| 参考文献                |

# 1 绪 论

## <span id="page-5-1"></span><span id="page-5-0"></span>1.1 课题研究的背景与意义

随着各种传媒和社交媒体的高速发展下,人们获取信息的渠道多种多样。例 如,很多学生和家长通过互联网寻找和了解高校的信息,包括学校的声誉、招生 政策、教学质量等。因此,高校的舆情监测和预警工作变得非常重要。传统的舆 情监测和预警方式主要是通过人工收集和分析各种信息来源(如新闻、公告、微 博、微信等),但这种方式很容易受到人为因素的影响,而且效率比较低。基于 机器学习的高校舆情监测预警系统可以实现自动化的信息处理和分析,有效提高 舆情监测和预警的精度和效率。这种系统可以对高校相关信息进行实时监测,自 动识别负面信息并进行预警,及时采取措施避免或缓解危机事件的发生,从而保 护高校的声誉和形象,提高学校的综合竞争力。因此,基于机器学习的高校舆情 监测预警系统具有重要的研究意义和实际应用价值[1] 。

在如今,学生群体对于表白墙的使用频繁,用于表达情感、传递信息的方式。 然而,随着表白墙的流行,也出现了一些问题,如不良言论、违规行为等,这些 都会对学校的形象和师生的安全造成影响。因此,为了维护校园的良好秩序和安 全环境,需要引入基于深度学习的评论舆警系统。这种系统可以自动地对表白墙 上的评论进行分析和监测,快速发现和处理各种不良言论和违规行为,以保护学 生的身心健康和人身安全。

具体来说,基于深度学习的评论舆警系统可以使用自然语言处理技术和深度 学习算法对评论进行分析和识别。系统可以通过对大量的表白墙评论进行训练, 提取出各种类型的不良言论和违规行为,如人身攻击、语言粗鄙等,然后通过算 法进行分类和标记。一旦发现有不良言论或违规行为,系统将自动预警并将评论 标记为潜在的风险事件,实时向管理员和有关部门发送警报信息,以及进行相应 的处置和处理。

此外,基于深度学习的评论舆警系统还可以对评论进行语义分析和情感分析, 识别评论中的情绪和语言用法,如表达爱慕、支持、抱怨、不满等。这些信息可 以为学校领导提供更全面的反馈,更好地了解学生的需求和心理状况,以便采取 相应合理的措施。

总之,基于深度学习的评论舆警系统可以帮助学校更好地管理表白墙,减少 不良言论和违规行为的发生,维护学校的形象和师生的安全。

本文介绍了基于 RNN 搭建高校舆论监控系统,以高校为监控对象,通过对 社交媒体平台上与高校相关的帖子、评论和关键词等信息进行爬取和分析,获取 高校的舆情信息。结合 pytorch 框架搭建三层模型。第一层是 embedding 层,为 嵌入层,第二层是 RNN 层,第三层是线性层。之后基于先前生成的数据和表白 墙爬取的数据使用 jieba 分词创建一个词典。用户从表白墙爬取数据,如果评论 中有词典里的词上交给用户,再让用户来进行判断是否违规。再将违规的写入数 据,再重新训练模型。

在数据处理方面,可以对爬取得到的原始数据进行清洗和预处理,如去除噪 声数据、删除一些没有意义标点符号和停用词、进行分词和词向量化等处理,以 便更好地提取有效的特征信息。同时,需要设置合适的评估指标,如准确率、召 回率、F1-score 等,以便对预测结果进行有效评估。通过基于 RNN 搭建高校舆 论监控系统,我们可以实现对高校舆情信息的实时监测和预测,并为高校相关决 策提供科学依据。

# <span id="page-6-0"></span>1.2 国内外研究现状及发展趋势

近年来,随着社交媒体的普及,高校舆论监控系统越来越受到关注。目前国 内在基于机器学习的高校舆论监控系统方面已经有了一些研究。基于情感分析的 高校舆情监测,利用机器学习技术对高校相关舆情进行挖掘,包括文本情感分析、 主题情感分析、事件情感分析等。然后利用可视化技术呈现出高校舆情的整体状 态和趋势变化;基于深度学习的高校舆情监控,使用深度学习技术,对高校相关 信息进行分类、聚类、摘要等预处理,进而对高校舆情的正负向、热度等进行分 析和预测;基于自然语言处理的高校舆情监测,利用自然语言处理技术,提取高 校相关信息中的实体、关系等特征,从而对高校舆情进行分析[2] 。

随着发展多模态高校舆情监控,未来的高校舆情监控系统将不再以单一的文 本数据为基础,而是融合图片、视频等多模态数据进行分析。高校舆情实时预警, 未来高校舆情监控系统将注重实时性,对异常事件及时进行预警和处理[3] 。高校 舆情态势分析,未来高校舆情监控系统将不仅关注单一事件的分析,而是对高校 舆情的总体态势进行深入分析,从而更好地把握高校舆情的发展趋势和变化。

而基于机器学习的高校舆情监测预警系统国外研究也有着长足的发展。情感 分析和主题建模,很多研究都侧重于使用机器学习算法对舆情进行情感分析和主 题建模。这些技术可以帮助高校了解公众对其的看法,并及时发现潜在的问题。 基于社交媒体的监测系统,很多研究都专注于使用社交媒体监测高校舆情。监测 系统会自动抓取社交媒体上的相关内容,然后使用机器学习算法进行分类、聚类 和预测等[4] 。数据可视化,数据可视化将是未来高校舆情监测预警系统的重要组 成部分。可视化技术可以让高校领导及时掌握信息、判断事态,比如时间序列图 和热力图等。多模态分析方法,不仅仅只使用文本信息,还可以将图片、视频等 非结构化信息融合进来进行分析。

国外的 TDT(话题检测与追踪)的研究,它对新闻信息流进行核心内容的自 动识别和已知内容的持续更进。通过话题发现和跟踪,将分散的信息合理地拼 接,进行了解和分析,也可以用来了解其他语言信息来源,在新内容出现时发 出预警。TDT 的研究内容主要包括:话题切分、话题跟踪、话题检测、首次报告 检测、关联检测等。TDT 的研究与积累为网络舆情系统的发展埋下了很深远的 伏笔。除了话题检测与跟踪的课题的研究之外,还有许多国外知名学者对网络 搜索、文本分析、文本倾向性做了很多科研。

总而言之,基于机器学习的高校舆情监测预警系统在国外已经取得了很大 的发展,未来还将继续向更完善、全面、智能化的方向前进。

## <span id="page-7-0"></span>1.3 研究内容

程序的实现主要包括以下五个部分:1.网站系统搭建:系统实现登录 django 框架来实现,用户信息(用户名,密码)存储在 django 自带数据库 db.sqlite 里; 2.数据获取:ChatGPT 生成评论数据,包括违规和不违规。表白墙爬取数据;3. 数据预处理:使用 Word2Vec 把每一个字转换成一个向量;4.分词工具:jieba 分 词器;5.模型训练,基于 RNN,再结合 pytorch 框架;6.使用模型,基于训练的 模型识别舆情数据是否违规。

# 2 相关技术理论基础

## <span id="page-8-1"></span><span id="page-8-0"></span>2.1 RNN(循环神经网络)

### <span id="page-8-2"></span>2.1.1 神经网络

把神经网络比作可以模仿各种函数的黑盒子,有了 X,就可以得到 Y,在网 络上给 X,在输出级上给 Y。

两种方法均能单独完成一次的输入,前后两种输出之间没有什么关系。但有 的工作需要更好地处理序列的资讯,所以以前的东西和后面的东西有一定关系。 例如,要理解一个句子的意思,只知道一个词的意思是远远不够的,必须理解所 有这些词之间的关系;就像制作视频的时候,不能分开分析,要把它们结合起来。 所以,在这种情况下,RNN 是合适途径。

#### <span id="page-8-3"></span>2.1.2 RNN 的结构和原理

RNN 由输入层、隐藏层和输入层组成,如图 2-1 所示。

![](_page_8_Figure_7.jpeg)

图 2-1 RNN 层级

如果把上面标记 W 的圆环中的一个箭头去除,就会构成最普遍的、最完整 的神经网络。O 表示向量,表示输出层的值;V 是隐藏层和输出层的权重。S 是 隐含层的值(在隐含层中有一个节点,可以将其视为若干节点,节点数目与向量 s 相等)。权重矩阵 w 是前一次隐藏层数目的一个值,该值为本次输入的权重。 U 是输入和隐藏阶段的权重。x 为表示输入层数值的向量(这里没有画出表示神 经元节点的圆圈)。

展开上面的图,如图 2-2 所示,可以看出下面是一个循环的网络。

![](_page_9_Figure_0.jpeg)

图 2-2 循环网络结构

循环神经网络在 t 时收到输入之后,隐藏层值是,输出值是,主要是 的值和,−1两个都有关系。

RNN 就是一个单元结构重复使用。其中每个圆圈都是一部分,它们的作用 相同,所以呈现折叠呈左半图。

是 t 时刻的输入,是 t 时刻的输出,是 t 时刻的记忆是 t 时刻的输入, :是 t 时刻的输出,:是 t 时刻的记忆。由于当前时间的输出是由记忆和当前 时间的输出决定的,就像现阶段的知识量总和,是现阶段和以前的知识量相加。 RNN 就像这样,神经网络是通过一系列参数把很多内容凑再一起,然后了解这 个参数,所以 RNN 的基础: = ( ∗ + ∗ −1) = ( ∗ + ∗ −1)

()函数为该神经网络的激活函数,在神经网络中用于过滤那些不需要信息, 用该函数表示非线性映射。

#### <span id="page-9-0"></span>2.2 ChatGPT

ChatGPT 是由 OpenAI 开发的基于 GPT-3.5 和 GPT-4 架构的聊天生成预训 练转换器,它可以通过人工智能技术进行自然语言对话。ChatGPT 使用大型语言 模型和强化学习进行训练,能够理解上下文,并在对话中提出澄清问题以及引导 回答问题的方法。目前,ChatGPT 仍然只能以文字方式与人进行交互。

## <span id="page-9-1"></span>2.3 网络爬虫

网络爬虫的原理就是模拟浏览器发送 HTTP 请求,获取响应并解析数据,最 后将所需信息进行处理和存储。

爬虫通过 HTTP 请求,向指定网站发出请求,获取响应数据并从中提取有用 信息的程序。其基本流程如下:发起请求,通过 HTTP 库向最终站点发起请求, 请求可以包含额外的 headers、data 等信息,然后等待服务器响应。类似于在浏览

器地址栏输入网址,然后点击回车;解析内容,拿到响应内容后,爬虫需要先用 HTML 解析器或 XPath 等技术对页面进行解析。Python 常用的解析库包括 BeautifulSoup、lxml 等;数据存储,爬取到的内容需要进行存储。常见的存储方 式有:MySQL 数据库、MongoDB、Redis 等。防止反爬虫,为了防止爬虫过于频 繁地请求服务器,需要对请求进行限速、设置请求头等操作。

## <span id="page-10-0"></span>2.4 jieba 分词器

jieba 分词器一款开源的中文分词工具,它可以对中文文本进行简单分词、并 行分词、命令行分词等操作。除了基本的分词功能之外,jieba 分词器还支持关键 词提取、词性标注、词位置查询等功能,并且它不仅仅支持 Python 语言,还支 持其他语言和平台,如 C++、Go、R、Rust、Node.js、PHP、iOS 等。通过设置 不同的模式(精确模式、全模式、搜索引擎模式),jieba 分词器可以更好地适应 各种不同场景下中文分词需求。此外,它还可以让用户自己定义词典,可以通过 添加自定义词典来提高分词的准确率。

## <span id="page-10-1"></span>2.5 db.sqlite 数据库

DB Browser for SQLite 是一个高质量、可视化的开源工具,可以创建、 设计和编辑与 SQLite 兼容的数据库文件。SQLite 是一种轻量级的数据库系统, 它的特点是占用资源少、易于集成和移植,因此在很多嵌入式系统和移动设备上 得到广泛应用。使用 DB4S 可以方便地对 SQLite 数据库进行管理,例如创建表 格、插入数据、查询数据等等。数据库文件通常以.db 或.sqlite 后缀名保存,可 以使用 DB Browser for SQLite 打开并进行操作。

## <span id="page-10-2"></span>2.6 Django 框架

Django 是一个由 python 编写的开源 Web 框架。使用 Django,只要一点点的 代码,开发者就可以很容易完成一个正式网站所需要的大很多内容,并进一步开 发出全功能的 Web 服务。Django 本身基于 MVC 模型,即 Model(模型)+ View (视图)+ Controller(控制器)的设计理念。它提供了强大的后台管理系统,支 持 ORM 对象关系映射,使得数据库操作变得更加简单高效。同时,Django 也提 供了许多常用的功能模块,如表单验证、文件上传、缓存等,大大提高了开发效 率。

Django 框架采用了 MTV 设计模式,在工作机制上自然也有些特别之处, 其中最显著的就是 V 视图(View)部分。MTV 模式中的 V 视图(View)是 不负责处理用户输入的,这一点就是 MTV 模式特殊之处。

Django 框架下的 V 视图(View)不负责处理用户输入,只负责选择要展 示的数据并传递到 T 模板(Template)上。然后,由 T 模板(Template)负责 展示数据(展示效果),并最终呈现给终端用户。进一步来讲,就是 Django 框 架将 MVC 中的 V 视图(View)解构为 V 视图和 T 模板两个部分,分别用 于实现"展现数据"和"如何展现"这两部分功能,这样 T 模板(Template) 可以根据用户需求来随时更换,而不仅仅限制于内置的模板。

## <span id="page-11-0"></span>2.7 Word2Vec

Word2Vec 是一种自然语言处理工具,主要用于将单词转换为向量表示。在 进行数据预处理时,可以使用 Word2Vec 将原始文本数据转化为向量表示的形式, 方便后续的特征提取和机器学习模型训练。

Word2Vec 可以作为数据预处理中的一种方法,将文本数据转换为向量形式 进行特征提取和机器学习模型训练 。在将一个字映射为向量的过程中,通常会 使用词向量模型(Word Embedding Model),比如 Word2Vec 等模型。这些 模型可以将文本中的单词或字母映射成高维向量,并保留它们之间的语义关系。 除此之外,还有一些更加高级的模型,如 BERT、GPT 等,它们不仅可以将输入 的文本映射成向量,还可以直接输出对应的语义表示或生成文本。

## <span id="page-11-1"></span>2.8 腾讯预训练嵌入模型

腾讯预训练嵌入模型是一种基于 Transformer 结构的自然语言处理技术,可 以将文本转换为高维向量嵌入,并在该向量空间中对文本进行各种 NLP 任务, 如分类、聚类、相似度计算、机器翻译等。

该模型使用了海量的中文语料进行预训练,以获取丰富的语义信息,并且支 持不同粒度的文本输入,如单词、句子、段落等。在实际应用中,用户可以通过 腾讯提供的 API 接口或自行部署该模型进行文本向量化处理,以支持各种 NLP 任务的实现。

# 3 系统分析与设计

#### <span id="page-12-1"></span><span id="page-12-0"></span>3.1 设计思想

本系统主要界面包括登录界面、舆情信息收集界面、舆情信息分析界面和舆 情预警界面。设计一个爬虫爬取表白墙评论信息作为舆情信息收集界面。通过机 器学习实现了舆情数据判别,即舆情信息分析界面。通过设置的预警级别再结合 前面的舆情信息分析,从而实现舆情信息预警界面。

#### <span id="page-12-2"></span>3.2 功能模块需求分析

- (1) 舆情信息收集功能:从预设的高校网络数据源获取相关舆情数据,在 表白墙等地方用网络爬虫爬取相关评论,对评论进行综合和词云统计, 并对获取的数据进行标注和预处理。
- (2) 舆情信息分析功能:通过机器学习实现了舆情数据自动化判别机器学 习通过训练和调优达到较好的预测准确度,实现了舆情数据判别。
- (3) 舆情信息检测功能:基于训练好的机器学习模型,对新的舆情信息进 行分类,对不同类型的舆情数据进行自动标注。
- (4) 舆情信息预警功能:设置预警级别,根据舆情数据的预测分类标签, 将具有特定特征的数据设置为相应的预警级别。
- (5) 舆情信息反馈功能:对舆情预警信息进行核查,将验证的实际预警标 签结果标注到数据,并对机器学习模型进行重新训练,得到优化后的 模型,更加完善高校网络舆情监测预警系统。

## <span id="page-12-3"></span>3.3 系统功能

系统分为 5 个功能,如图 3-1 所示。

![](_page_12_Figure_11.jpeg)

图 3-1 系统功能图

#### <span id="page-13-0"></span>3.4 数据库设计

为了更直观的描述系统的功能以及各各模块之间的依赖关系,需采用E-R来体现,以下是用户登录数据库设计中主要使用的E-R图,管理员和学生之 间关系的E-R图如下图3-2所示。

![](_page_13_Figure_2.jpeg)

图 3-2 管理员和学生之间关系的 E-R 图

# 4 系统实现

## <span id="page-14-1"></span><span id="page-14-0"></span>4.1 数据的获取

使用网络爬虫爬取学校表白墙和 ChatGpt 生成评论数据,分为违规评论和不 违规评论。生成数据以后统计字典。也就是一个字对应一个数字。

爬虫可以通过模拟浏览器的方式,自动化地访问学校表白墙网页,并爬取其 中的评论数据。以下是一般爬取基于 Web 的评论数据的步骤:确认评论数据所 在的页面地址。使用 python 的 requests 库发起 HTTP 请求,并获取该页面的 HTML 代码。使用 Beautiful Soup 或其他 HTML 析库解析 HTML 代码,获取评 论数据所在的元素或 CSS 类名等标识符。提取评论数据并保存至本地文件或数 据库中。如图 4-1 所示。

图 4-1 爬虫爬取表白墙

在爬取学校表白墙评论数据时,需要注意反爬虫措施,如 IP 封禁、验证码等。

此外还要遵守网站的 Robots 协议,不要过度频繁地请求同一网页,避免对网站 造成负担。爬取评论数据如图 4-2 所示。

#### 图 4-2 表白墙评论数据

ChatGPT 是一个基于 GPT 模型的聊天机器人,它可以用于自然语言处理、 聊天对话等任务。用 ChatGPT 生成评论数据,大概分为以下几个步骤进行:准 备数据,首先需要准备相应的数据,可以从互联网上抓取一些评论数据集,例如 Amazon 的产品评论、IMDB 电影评论等;数据清洗,将抓取到的评论数据进行 清洗和过滤,去除一些无效的信息和噪声;训练模型,使用训练的 GPT 模型来 生成评论数据。为了获得更好的生成效果,可以针对具体场景进行微调。例如, 在训练模型时,可以设置合适数量的迭代次数以及学习率等参数;评估模型,使 用一些评估指标来评估生成的评论数据的质量,例如准确度、流畅度、多样性等; 调优模型,如果评估结果不理想,还需尝试改变模型结构或者修改训练参数等方 式来提高生成质量。

## <span id="page-15-0"></span>4.2 数据的处理

数据的预处理是指在进行机器学习任务之前,对原始数据进行清理、转换和 归约等操作,使得数据能够被更好地理解和分析。其中,将文本转化为向量是常 见的预处理步骤之一。这一步骤的目的是将文本数据转化为机器学习模型可以处 理的数字格式,以便进行特征工程和建模。

 具体来说,将文本转化为向量需要使用文本表示方法,如词袋表示法、TF-IDF 表示法、Word2Vec 等。这些表示方法可以将每个单词转化为一个特定的向 量,从而实现整个文本的向量化。通过向量化后的文本,机器学习模型就可以利 用文本中的信息进行分类、聚类、推荐等任务。值得注意的是,数据预处理是机 器学习流程中至关重要的一环,因为"Garbage In, Garbage Out",即质量不 好的数据会导致错误的统计分析结果。在文本数据的预处理中,数据清理 (data cleaning)是一项非常重要的工作。

加载原始文本数据,并进行数据清洗和预处理,去除噪声和不必要的信息。 使用 Word2Vec 算法对清洗后的文本数据进行训练,建立起单词到 n 维向量的映 射关系。对于需要进行分类或者聚类的任务,可以使用 Word2Vec 生成的每个单 词的向量表示进行特征提取,并结合其他特征进行模型训练。如果需要对输入的 句子或段落进行分类,可以将句子中每个单词的向量进行平均或加权平均,生成 句子或段落的向量表示,并使用这个向量作为整个句子或段落的特征。

之后使用腾讯下载的预训练嵌入模型。形式为一个矩阵。然后根据每一个字 的 id(就是字典后面对应的数字)把字映射为向量。比如你对应 2,那么就把你 映射到嵌入模型矩阵的第二行。如果后面数据出现了不认识的字,会专门把他映 射到一个固定的行。这个只是一个预训练模型,数值后面还会变化。

再设定一个长度,比如 30.如果一句话长度超过三十,就截取到 30。如果不 到 30 就用 pad 补齐。pad 可以认为是一个字。只有这样,句子长度统一了才可以 放入模型进行训练。因为模型必须输入矩阵才可以。这样一个句子就相当于一个 矩阵。

## <span id="page-16-0"></span>4.3 模型的构建

设计 RNN 模型,选择适当的 RNN 模型,例如循环层(recurrent layer)和 长短期记忆(LSTM)等。编译模型,选择合适的优化器和损失函数,编译模型。 训练模型,将数据输入模型中,使用算法更新模型参数,直到达到预定义的停止 条件,如最大迭代次数或收敛误差等。评估模型,使用测试集对模型进行评估, 并根据结果进行必要的调整。

使用 pytorch 中的 Embedding 来构建一个嵌入层。嵌入层接收一个索引列表 并将它们转换为密集向量。这在自然语言处理中非常有用,因为文本数据通常以 词汇表中的单词表示。嵌入层可以将这些单词嵌入到一个低维的向量空间中,以 便于在后续的神经网络中进行处理。如图 4-3 所示。

图 4-3 构建 RNN 模型

该模型包含了一个 Embedding 层、一个 RNN 层、一个全连接层和一个 Sigmoid 层 。 " embedding\_matrix " 是一个预训练好的词向量矩阵,通 过 "np.load()" 和 "torch.tensor()" 加载为 PyTorch 的 Tensor 格式, 并用其初始化了 Embedding 层。"rnnmodel"类定义了该模型的结构,其中 "self.embed"是初始化好的 Embedding 层,"self.rnn"是一个包含一个单向 RNN 神经元的 RNN 层,"self.linear"是一个全连接层,"self.sig" 是一个 Sigmoid 层。在调用时,输入到模型的"x"会先经过 Embedding 层进行词向 量化,然后作为 RNN 层的输入,最后经过全连接层和 Sigmoid 层得到输 出结果。

## <span id="page-17-0"></span>4.4 模型的训练

模型的训练数据来源于"./logapp/data/train.txt",其中包含了大量的文本 样本及其对应的标签,用于训练和验证模型。

加载字典文件"./logapp/data/vocab.pkl"。将文本样本中的每个字按照字 典映射为相应的数字。再构建数据集并使用 DataLoader 对数据进行批处理。然 后定义 RNN 模型及优化器,并使用 BCELoss 作为损失函数进行训练。最后经过 多轮迭代后,最终输出在训练集上的 loss。后面使用该模型进行监测,结合测试 集,并将测试集预处理成与训练集相同格式的数据,然后输入到该模型中进行预 测。训练过程如图 4-4 所示。

图 4-4 训练 RNN 模型

## <span id="page-18-0"></span>4.5 模型的使用

收集要预测的数据,并将其进行预处理后,进行特征提取,使用相同的方法, 将文本转化为向量形式。

载入模型,将训练好的 RNN 模型载入内存中,以便于进行预测操作。就可 以进行预测操作,将预处理后的数据输入到模型中,进行预测。模型是基于 RNN 设计的,因此可以将输入数据视为时间序列数据,使用 LSTM 或 GRU 等 RNN 变体进行处理,得到预测结果。最后进行结果输出,根据预测结果,可以将文本 归为不同的类别(例如正面、负面、中性),或者进行其他的量化分析。最终的 结果可以保存到本地文件中,或者通过其他方式输出。

预测结果的准确性可能会受到多种因素的影响,例如数据质量、特征提取方 法、模型参数等。因此建议对模型进行多次交叉验证,以评估其性能和稳定性。 同时也可以调整模型参数、改进特征提取方法等,以提高模型的预测能力。

## <span id="page-19-0"></span>4.6 用户登录功能

系统实现登录用 python 语言,django 框架来实现。用户信息(用户名,密 码)存储在 django 自带数据库 db.sqlite 里。

用 Django 框架的用户登录功能,安装好 Django 框架后, 在 Django 项 目中创建一个应用,用于处理用户登录等相关功能。在该应用的"views.py"文 件中编写一个函数用于处理用户登录请求。

再创建一个登录页面模板 "login.html" 用于显示登录页面和接收用户 的登录信息,在项目中配置 URL 映射,将 "/login" 的请求映射到上 述 "views.py" 中的"login" 函数,以便用户能够通过该 URL 访问登 录页面并提交登录表单。以上是 Django 框架实现用户登录的基本步骤。当用 户提交登录表单时,Django 会帮助我们验证用户名、密码等信息,并根据验证结 果处理登录请求。

最后界面图如 4-5 和 4-6 所示。

|  | 用户名: adcd |  |    |  |  |
|--|-----------|--|----|--|--|
|  | 密码: ••••  |  |    |  |  |
|  | 登录        |  | 注册 |  |  |
|  |           |  |    |  |  |
|  |           |  |    |  |  |

图 4-5 用户登录界面

![](_page_20_Picture_2.jpeg)

图 4-6 用户注册界面

## <span id="page-21-0"></span>4.7 舆情信息收集功能

从预设的高校网络数据源获取相关舆情数据,在表白墙用网络爬虫爬取相关 评论和 ChatGpt 生成评论数据,对评论进行综合和词云统计,并对获取的数据进 行标注和预处理。如图 4-7 所示。

![](_page_21_Picture_2.jpeg)

图 4-7 表白墙词云统计

## <span id="page-21-1"></span>4.8 舆情信息分析功能

通过机器学习实现了舆情数据判别,再训练和调优达到较好的预测准确度, 实现了舆情数据判别。分析评论与结果如图 4-5 和 4-6 所示。

![](_page_21_Picture_6.jpeg)

图 4-8 输入评论界面

#### 图 4-9 输出结果界面

## <span id="page-22-0"></span>4.9 舆情信息预警功能

设置预警级别,分为 3 个等级,0 表示无违规,1 表示轻度违规,2 表示重 度违规。根据舆情数据的预测分类标签,将具有特定特征的数据设置为相应的预 警级别,达到对于高校舆情监测效果。如图 4-10 所示。

图 4-10 舆情预警功能

# 5 系统测试

#### <span id="page-23-0"></span>黑盒测试用例设计

- 1.注册功能黑盒测试。舆情监控系统注册功能需求如下:
- ①需要填写用户名,可以判断是否为空。
- ②需要填写密码,判断是否为空。
- ③核对密码与确认密码一致。

运用等价类划分设计测试用例方法

 第 1 步:抽取输入项并划分等价类,给每一个等价类编号,如表 5-1 所 示。

输入条件 有效等价类 无效等价类 用户名 1.字母 2.数字 3.字符 4.字母,数字,字符的组 合 5.空 密码 6.字母 7.数字 8.字符 9.字母,数字,字符的组 合 10.空 确认密码 11.与密码完全相同 12.与密码不完全相同

表 5-1 用户登录等价类用例表

第 2 步:设计测试用例。

首先每设计一个测试用例尽可能多的覆盖有效等价类;其次为每一个无效等 价类至少设计一个测试用例,如表 5-2 所示。

#### 表 5-2 用户登录测试用例表

| 测试输入<br>项 | 输入值       | 期望结果   | 覆盖范围 | 状态<br>(通过与<br>否) |
|-----------|-----------|--------|------|------------------|
| 用户名       | Zhangsan  | 合法     | 1    | 是                |
| 用户名       | 123       | 合法     | 2    | 是                |
| 用户名       | ###       | 合法     | 3    | 是                |
| 用户名       | Zhang123# | 合法     | 4    | 是                |
| 密码        | Admin     | 合法     | 5    | 是                |
| 密码        | 123       | 合法     | 6    | 是                |
| 密码        | ***       | 合法     | 7    | 是                |
| 密码        | Admin123* | 合法     | 8    | 是                |
| 密码        |           | 密码不能为空 | 10   | 否                |
| 确认密码      | Admin     | 合法     | 11   | 是                |
| 确认密码      | Aaa6666   | 与密码不一致 | 12   | 是                |

第 3 步:执行各个测试用例并将测试用例通过与否记录在测试用例的状态栏 中。

第 4 步:将测试结果进行总结,并提出修改建议,如表 5-3 所示。

表 5-3 用户登录测试结果总结表

| 序号 | 问题描述          | 修改建议            |
|----|---------------|-----------------|
|    | 没有对用户设置的密码的安全 | 密码过于简单,不予注册,并提升 |
| 1  | 性进行判断         | 用户加大密码难度        |
| 2  | 密码不可见         | 设置密码可见          |
| 3  | 密码没有长度限制      | 设置长度限制          |
| 4  | 没有边界限制        | 设置边界上限          |

#### 2. 评论检测功能测试

第 1 步:抽取输入项并划分等价类,给每一个等价类编号,如表 5-4 所示。

表 5-4 评论输入等价类用例表

| 输入条件 | 有效等价类 | 无效等价类 |
|------|-------|-------|
|      |       |       |

|    | 1.字母         |     |
|----|--------------|-----|
|    | 2.数字         |     |
| 评论 | 3.字符         | 5.空 |
|    | 4.字母,数字,字符的组 |     |
|    | 合            |     |

第 2 步:设计测试用例。

首先每设计一个测试用例尽可能多的覆盖有效等价类;其次为每一个无效等 价类至少设计一个测试用例,如表 5-5 所示。

表 5-5 评论输入测试用例表

| 测试输入<br>项 | 输入值       | 期望结果 | 覆盖范围 | 状态<br>(通过与<br>否) |
|-----------|-----------|------|------|------------------|
| 评论        | 笨蛋        | 合法   | 3    | 是                |
| 评论        | 123       | 合法   | 2    | 是                |
| 评论        | ###       | 合法   | 3    | 是                |
| 评论        | Zhang123# | 合法   | 4    | 是                |

第 3 步:执行各个测试用例并将测试用例通过与否记录在测试用例的状态栏 中。

第 4 步:将测试结果进行总结,并提出修改建议,如表 5-6 所示。

表 5-6 评论输入测试结果总结表

| 序号 | 问题描述     | 修改建议   |
|----|----------|--------|
| 1  | 评论没有长度限制 | 设置长度限制 |
| 2  | 没有边界限制   | 设置边界上限 |

# 6 研究成果与社会的关系

<span id="page-26-0"></span>机器学习是一门人工智能的科学,主要研究如何在经验学习中改善具体算法 的性能。而高校舆情监控系统则是基于机器学习的舆情监控系统,可以对高校的 品牌形象、名声等进行实时监测和管理,利用数据来优化相关策略并提高高校品 牌形象。

基于机器学习的高校舆论监控系统已经成为关注的热点问题,该系统的研究 成果与社会关系密切相关。高校作为一个重要的社会组织,其形象与声誉是吸引 学生和社会关注的重要因素。基于机器学习的舆情监控系统可以实时跟踪高校的 声誉和知名度变化,以及在舆论危机事件发生时,提供第一手数据和舆情分析的 支持,帮助高校做出更加准确、高效的应对措施。

同时,基于机器学习的高校舆论监控系统的研究成果也对相关产业和社会组 织产生了影响。如在智能化监控方面,具有很强的先进性和前瞻性。此外,在相 关领域的人才培养、数据管理、营销策略等方面也有积极的推动意义。

因此,可以看出,基于机器学习的高校舆论监控系统的研究成果对社会关系 有着重要的意义,它不仅关乎高校自身的声誉和形象,更涵盖产业和社会组织的 广泛范围。

# 结 论

<span id="page-27-0"></span>高校舆情监控系统是通过对社交媒体、新闻网站等网络渠道进行爬取数据, 并使用 NLP 技术进行分析,以实现对某一高校的舆情动态进行及时监测和预测 的系统。而 RNN 是一种递归神经网络,它在处理时间序列数据或者序列数据时 有着良好的表现。由于舆情信息是一种随时间推移而产生的序列数据,因此 RNN 非常适合用来处理此类问题。

pytorch 则是一个基于 python 的科学计算库,它提供了强大的张量计算 (Tensor Calculus)功能,同时还拥有自动求导的优秀性能。这使得 pytorch 成 为了建立深度学习模型的主流工具之一,而在高校舆情监控系统中也可以通过 pytorch 来构建相应的模型。

通过 RNN 和 pytorch 的组合,可以构建出一种高效、准确的高校舆情监控 系统,并能够较好地解决高校舆情动态的分析和监测问题。

首先系统实现登录是用 python 语言,django 框架来实现。用户信息(用户 名,密码)存储在 django 自带数据库 db.sqlite 里。然后使用 ChatGPT 生成数据, 分为违规评论和不违规评论。生成数据以后统计字典。也就是一个字对应一个数 字。之后使用在腾讯下载的预训练嵌入模型。形式为一个矩阵然后根据每一个字 的 id(字典对应的数字)把字映射为向量。例如对应 2,那么就把你映射到嵌入 模型矩阵的第二行。如果后面数据出现了不认识的字,会专门把它映射到一个固 定的行。这是一个预训练模型,数值后面还会变化。之后设定一个长度,比如 30. 如果一句话长度超过三十,就截取到 30。如果不到 30 就用 pad 补齐。pad 是一 个字。这样句子长度统一了才可以放入模型进行训练。因为模型必须输入矩阵才 可以。这样一个句子就相当于一个矩阵。

使用 pytorch 框架搭建模型。模型有三层,语言用 python。第一层是 embedding 层,是嵌入层。用于将字的 id 映射为向量。初始数值为上面的腾讯预训练嵌入 模型。后面会通过训练改变数值。用腾讯预训练模型来初始数值为了加快训练。 训练后,会让字有一定特性,比如我,你,他向量会比较接近。爷的对应向量-父的对应向量约等于儿的对应向量。第二层是 RNN 层,他是将数据中的字一个 一个放入模型,最终获得一个向量。第三层是线性层,它是将获得的向量每一个

数加权平均一下,获得一个数字。之后用 sigmoid 函数计算,如果大于一个数字 认为违规,否则认为没有违规。

基于生成的数据和表白墙爬取的数据使用 jieba 分词创建一个词典。之后用 户从表白墙爬取数据,如果评论中有词典里的词就上交给用户,让用户来进行判 断是否违规。违规的话写入数据,可以重新训练模型。

# 致 谢

<span id="page-29-0"></span>初见金秋,别于炎夏。蓦然回首,历历在目。晃晃四载,皆是过往。花有重 开日,人无再少年。人生这场旅途才刚刚拉开序幕,沿途的花花草草,山川河流 都很美丽,终点在哪不是那么重要。我希望,时间流去的,只是时间,我的心还 是那样炽热。回顾四年的校园生活,从 2019 开始,到 2023,我的生活中有很多 的爱心和喜悦,感谢四年的求学经历,让我对生命的真谛有了一个更深刻的认识, 我会怀着期望和祝愿走出校园,踏上新的旅程。

首先,我要感谢我的导师,给予我无私的指导和帮助,让我不断进步和成长。 老师严谨的治学精神、卓越的专业知识和宽广的人文素养对我将产生深远的影响, 我将倍加珍惜与老师相处的宝贵时光。其次,我要感谢父母对我的关怀和支持。 是他们一直支持着我,在我失意、彷徨的时候给予我无限的鼓励和支持,让我始 终保持着积极向上的心态,勇往直前,为梦想奋斗不息。

我要感谢我的母校,是她提供了优越的学习环境和丰富的资源,让我拓展了 新的视野,开阔了新的思维。同时,母校也培养了我坚韧不拔、努力向上的品质, 让我成为一个积极进取的人。

我们长在红旗下,活在春风里。生于华夏是这辈子最感到荣幸的一件事。国 家为我们提供了舒适温暖的学习环境,我们会努力工作,报效祖国,以报答国家 的教育。

转眼间,春天过去了,夏天过去了。回想四年前,我的思绪都变成了记忆, 很不舍,也很放松,但我仍然要说声感谢。恩师的栽培,家人的恩情,同学的恩 情,我都会铭记于心。

再见,可爱的同学们!再见,尊敬的老师们!再见了,我的大学!

# 参考文献

- <span id="page-30-0"></span>[1] 梁泽鹏,李直达. 基于机器学习的舆情预警模型的设计与实现[J]. 广东公 安科技, 2020, 28(03): 1-5.
- [2] 邓磊,孙培洋. 基于深度学习的网络舆情监测系统研究[J]. 电子科技,2022, 35(12): 97-102.
- [3] 陈蒙,李学志. 高校网络舆情监测机制研究[J]. 现代信息科技, 2021,5(17): 145-148.
- [4] 钱丹丹,李林. 基于大数据技术的高校网络舆情监测与分析[J]. 厦门理工 学院学报, 2019, 27(04): 55-60.
- [5] 林伟伟. 网络舆情监测及报告系统在高校中的应用[J]. 电脑知识与技术, 2020, 16(26): 221-222+230.
- [6] 董积有. 高校网络舆情信息监测系统的优化与实现[D].广西:广西大 学,2021.
- [7] 刘魁一. 涉及未登录词的网络舆情多模态数据处理方法研究[D].四川:西南 民族大学,2020.
- [8] 王辉,刘蕾,沈黄金,等.网络舆情监测系统关键技术进展[J]. 计算机时代, 2022. 360(06): 49-53.
- [9] 谢卫红,杨超波,朱郁筱,等.网络舆情监控算法研究与分析[J]. 科技管理研 究, 2019. 39(22): 197-205.
- [10] 刘婧. 基于深度学习的网络舆情监测分析方法研究[D].陕西:西京学 院,2021.
- [11] 李洋.基于大数据的网络舆情监测系统的设计与实现[J].科技与创新, 2023, 224(08): 146-148.
- [12] 李家林.网络舆情监测管理系统的架构与应用[J].新闻前哨,2023, 362(07): 79-80.
- [13] 张志悦. 基于改进DFA算法的网站敏感词监测系统的研究和实现[D].上海: 华东师范大学,2022.
- [14] He W N , Xia D L , Liu J F , et al. Research on the Dynamic Monitoring System Model of University Network Public Opinion under the Big Data Environment[J].

Mobile Networks and Applications, 2022:1-12.

[15] Hongbing Ge,Baozhi Wang .Research on Management Model of Network Public Opinion Based on Big Data Technology[C]. Proceedings of 2019 2nd International Conference on Computer Information Science and Application Technology(CISAT 2019)(VOL.2) .IOP Publishing,2019:5.